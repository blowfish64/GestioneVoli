-- H2 2.1.214;
;             
CREATE USER IF NOT EXISTS "SA" SALT '1613ebd649a3fe34' HASH '097355200326e418fe98b67a431dff66b9d36f566263a02c392bb69b56197b5c' ADMIN;         
CREATE SEQUENCE "PUBLIC"."HIBERNATE_SEQUENCE" START WITH 1 RESTART WITH 225;  
CREATE CACHED TABLE "PUBLIC"."SPRING_SESSION"(
    "PRIMARY_ID" CHARACTER(36) NOT NULL,
    "SESSION_ID" CHARACTER(36) NOT NULL,
    "CREATION_TIME" BIGINT NOT NULL,
    "LAST_ACCESS_TIME" BIGINT NOT NULL,
    "MAX_INACTIVE_INTERVAL" INTEGER NOT NULL,
    "EXPIRY_TIME" BIGINT NOT NULL,
    "PRINCIPAL_NAME" CHARACTER VARYING(100)
);         
ALTER TABLE "PUBLIC"."SPRING_SESSION" ADD CONSTRAINT "PUBLIC"."SPRING_SESSION_PK" PRIMARY KEY("PRIMARY_ID");  
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.SPRING_SESSION;          
INSERT INTO "PUBLIC"."SPRING_SESSION" VALUES
('108db721-9a9b-4a6a-81d4-ebad4df1ac38', '32bb25f2-03c3-4a47-9bd8-a7beaaf6312d', 1657720341583, 1657720341977, 1800, 1657722141977, NULL);      
CREATE UNIQUE INDEX "PUBLIC"."SPRING_SESSION_IX1" ON "PUBLIC"."SPRING_SESSION"("SESSION_ID" NULLS FIRST);     
CREATE INDEX "PUBLIC"."SPRING_SESSION_IX2" ON "PUBLIC"."SPRING_SESSION"("EXPIRY_TIME" NULLS FIRST);           
CREATE INDEX "PUBLIC"."SPRING_SESSION_IX3" ON "PUBLIC"."SPRING_SESSION"("PRINCIPAL_NAME" NULLS FIRST);        
CREATE CACHED TABLE "PUBLIC"."SPRING_SESSION_ATTRIBUTES"(
    "SESSION_PRIMARY_ID" CHARACTER(36) NOT NULL,
    "ATTRIBUTE_NAME" CHARACTER VARYING(200) NOT NULL,
    "ATTRIBUTE_BYTES" BINARY VARYING NOT NULL
);         
ALTER TABLE "PUBLIC"."SPRING_SESSION_ATTRIBUTES" ADD CONSTRAINT "PUBLIC"."SPRING_SESSION_ATTRIBUTES_PK" PRIMARY KEY("SESSION_PRIMARY_ID", "ATTRIBUTE_NAME");  
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.SPRING_SESSION_ATTRIBUTES;               
INSERT INTO "PUBLIC"."SPRING_SESSION_ATTRIBUTES" VALUES
('108db721-9a9b-4a6a-81d4-ebad4df1ac38', 'org.springframework.security.web.csrf.HttpSessionCsrfTokenRepository.CSRF_TOKEN', X'aced0005737200366f72672e737072696e676672616d65776f726b2e73656375726974792e7765622e637372662e44656661756c7443737266546f6b656e5aefb7c82fa2fbd50200034c000a6865616465724e616d657400124c6a6176612f6c616e672f537472696e673b4c000d706172616d657465724e616d6571007e00014c0005746f6b656e71007e0001787074000c582d435352462d544f4b454e7400055f6373726674002462336632326364392d306163632d343766382d623735362d633338626537333432393232');          
CREATE CACHED TABLE "PUBLIC"."AEREO"(
    "ID" BIGINT NOT NULL,
    "CAPIENZA_BAGAGLI_CABINA" INTEGER,
    "CAPIENZA_BAGAGLI_STIVA" INTEGER,
    "CAPIENZA_PASSEGGERI" INTEGER,
    "MATRICOLA" CHARACTER VARYING(255),
    "COMPAGNIA_AEREA_ID" BIGINT
);             
ALTER TABLE "PUBLIC"."AEREO" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_3" PRIMARY KEY("ID");        
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.AEREO;   
INSERT INTO "PUBLIC"."AEREO" VALUES
(11, 10, 100, 10, 'M63001391', 1),
(12, 20, 200, 20, 'N43001286', 2);   
CREATE CACHED TABLE "PUBLIC"."AEROPORTO"(
    "ID" BIGINT NOT NULL,
    U&"CITT\00c0" CHARACTER VARYING(255),
    "NOME" CHARACTER VARYING(255)
);        
ALTER TABLE "PUBLIC"."AEROPORTO" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("ID");    
-- 5 +/- SELECT COUNT(*) FROM PUBLIC.AEROPORTO;               
INSERT INTO "PUBLIC"."AEROPORTO" VALUES
(3, 'Milano', 'Linate'),
(4, 'Milano', 'Malpensa'),
(5, 'Napoli', 'Capodichino'),
(6, 'Roma', 'Fiumicino'),
(7, 'Roma', 'Ciampino');             
CREATE CACHED TABLE "PUBLIC"."BIGLIETTO"(
    "ID" BIGINT NOT NULL,
    "CODICE_IDENTIFICATIVO" CHARACTER VARYING(255),
    "COSTO_TOTALE" DOUBLE PRECISION NOT NULL,
    "DATA_ORA_EMISSIONE" TIMESTAMP,
    "E_MAIL_PASSEGGERO" CHARACTER VARYING(255),
    U&"GIORNO_VALIDIT\00c0" DATE,
    "NUMERO_BAGAGLI_CABINA" INTEGER NOT NULL,
    "NUMERO_BAGAGLI_STIVA" INTEGER NOT NULL,
    "NUMERO_CARTA_CREDITO" CHARACTER VARYING(255),
    "POSTO_PASSEGGERO" INTEGER NOT NULL,
    "PASSEGGERO_ID" BIGINT,
    "VOLO_CODICE" CHARACTER VARYING(255)
);       
ALTER TABLE "PUBLIC"."BIGLIETTO" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_A" PRIMARY KEY("ID");    
-- 5 +/- SELECT COUNT(*) FROM PUBLIC.BIGLIETTO;               
INSERT INTO "PUBLIC"."BIGLIETTO" VALUES
(98, 'FwrrveHp', 55.0, TIMESTAMP '2022-07-06 10:58:16.74', '', DATE '2023-02-28', 1, 2, NULL, 1, 97, 'ABCDEF'),
(129, '1qKvrbcD', 105.0, TIMESTAMP '2022-07-06 11:00:14.603', '', DATE '2023-02-28', 2, 2, NULL, 2, 97, 'ABCDEF'),
(162, 'IkSRwIFi', 32.0, TIMESTAMP '2022-07-11 17:51:19.68', 'xxx@studenti.unina.it', DATE '2022-07-30', 1, 1, NULL, 1, 161, 'AA1234'),
(163, 'uDUL9XDl', 75.0, TIMESTAMP '2022-07-11 17:53:44.821', 'si.autiero@studenti.unina.it', DATE '2023-02-28', 1, 1, NULL, 3, 161, 'ABCDEF'),
(194, 'XYZ84SOa', 75.0, TIMESTAMP '2022-07-11 22:10:41.9', 'prova@p.p', DATE '2023-02-28', 1, 1, NULL, 4, 193, 'ABCDEF');        
CREATE CACHED TABLE "PUBLIC"."COMPAGNIA_AEREA"(
    "ID" BIGINT NOT NULL,
    "NOME" CHARACTER VARYING(255)
);             
ALTER TABLE "PUBLIC"."COMPAGNIA_AEREA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_C" PRIMARY KEY("ID");              
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.COMPAGNIA_AEREA;         
INSERT INTO "PUBLIC"."COMPAGNIA_AEREA" VALUES
(1, 'RyanAir'),
(2, 'EasyJet');               
CREATE CACHED TABLE "PUBLIC"."PASSEGGERO"(
    "ID" BIGINT NOT NULL,
    "CODICE_FISCALE" CHARACTER VARYING(255),
    "COGNOME" CHARACTER VARYING(255),
    U&"DOCUMENTO_IDENTIT\00c0" CHARACTER VARYING(255),
    "E_MAIL" CHARACTER VARYING(255),
    "NOME" CHARACTER VARYING(255),
    "UTENTE" BINARY VARYING(255),
    "NOME_UTENTE" CHARACTER VARYING(255)
); 
ALTER TABLE "PUBLIC"."PASSEGGERO" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ID");   
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.PASSEGGERO;              
INSERT INTO "PUBLIC"."PASSEGGERO" VALUES
(97, 'S', 'S', 'S', '', 'S', NULL, 'user'),
(161, 'XX', 'Xxx', 'XX', 'xxx@studenti.unina.it', 'Xxx', NULL, 'user'),
(193, 'P', 'P', 'P', 'prova@p.p', 'P', NULL, 'user');     
CREATE CACHED TABLE "PUBLIC"."TRATTA"(
    "ID" BIGINT NOT NULL,
    "DURATA_PREVISTA_MINUTI" BIGINT,
    "AEROPORTO_DESTINAZIONE_ID" BIGINT,
    "AEROPORTO_PARTENZA_ID" BIGINT
);      
ALTER TABLE "PUBLIC"."TRATTA" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_9" PRIMARY KEY("ID");       
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.TRATTA;  
INSERT INTO "PUBLIC"."TRATTA" VALUES
(8, 60, 6, 3),
(9, 90, 5, 4),
(10, 30, 5, 7);         
CREATE CACHED TABLE "PUBLIC"."TRATTA_COMPAGNIE_AEREE"(
    "TRATTE_ID" BIGINT NOT NULL,
    "COMPAGNIE_AEREE_ID" BIGINT NOT NULL
);        
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.TRATTA_COMPAGNIE_AEREE;  
INSERT INTO "PUBLIC"."TRATTA_COMPAGNIE_AEREE" VALUES
(8, 1),
(8, 2),
(9, 1),
(10, 2);     
CREATE CACHED TABLE "PUBLIC"."VOLO"(
    "CODICE" CHARACTER VARYING(255) NOT NULL,
    "DATA_ORA_PARTENZA" TIMESTAMP,
    "POSTI_BAGAGLIO_CABINA_RESTANTI" INTEGER NOT NULL,
    "POSTI_BAGAGLIO_STIVA_RESTANTI" INTEGER NOT NULL,
    "POSTI_PASSEGGERO_RESTANTI" INTEGER NOT NULL,
    "PREZZO_BASE" DOUBLE PRECISION,
    "AEREO_ID" BIGINT,
    "TRATTA_ID" BIGINT
);            
ALTER TABLE "PUBLIC"."VOLO" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_28" PRIMARY KEY("CODICE");    
-- 5 +/- SELECT COUNT(*) FROM PUBLIC.VOLO;    
INSERT INTO "PUBLIC"."VOLO" VALUES
('XXX0001', TIMESTAMP '2022-01-03 00:00:00', 10, 100, 10, 25.0, 11, 8),
('YYY0002', TIMESTAMP '2022-01-03 12:34:56', 20, 200, 20, 50.0, 12, 10),
('ZZ0003', TIMESTAMP '2022-01-31 00:00:00', 0, 71, 7, 1.0, 11, 9),
('AA1234', TIMESTAMP '2022-07-30 00:00:00', 9, 99, 9, 12.0, 11, 8),
('ABCDEF', TIMESTAMP '2023-02-28 16:30:00', 5, 94, 6, 55.0, 11, 9);           
CREATE CACHED TABLE "PUBLIC"."USERS"(
    "USERNAME" VARCHAR_IGNORECASE(50) NOT NULL,
    "PASSWORD" VARCHAR_IGNORECASE(500) NOT NULL,
    "ENABLED" BOOLEAN NOT NULL
);  
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4D" PRIMARY KEY("USERNAME"); 
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.USERS;   
INSERT INTO "PUBLIC"."USERS" VALUES
('guest', '$2a$10$12jCZZ1ozuiwUtlWR.ul5u1FIU.mrdesJ.wWR0Wk/ij6ttGXnGsV6', TRUE),
('admin', '$2a$10$fx6iu7YeD6gYSy3ONR1YJucjqImoJOP6vUG5IJGIvNp3t6uSVMYZS', TRUE),
('user', '$2a$10$12jCZZ1ozuiwUtlWR.ul5u1FIU.mrdesJ.wWR0Wk/ij6ttGXnGsV6', TRUE);    
CREATE CACHED TABLE "PUBLIC"."AUTHORITIES"(
    "USERNAME" VARCHAR_IGNORECASE(50) NOT NULL,
    "AUTHORITY" VARCHAR_IGNORECASE(50) NOT NULL
);             
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.AUTHORITIES;             
INSERT INTO "PUBLIC"."AUTHORITIES" VALUES
('guest', 'ROLE_GUEST'),
('admin', 'ROLE_ADMIN'),
('user', 'ROLE_USER');       
CREATE UNIQUE INDEX "PUBLIC"."IX_AUTH_USERNAME" ON "PUBLIC"."AUTHORITIES"("USERNAME" NULLS FIRST, "AUTHORITY" NULLS FIRST);   
ALTER TABLE "PUBLIC"."AEREO" ADD CONSTRAINT "PUBLIC"."FKHV3LFQ156WB4R9ANAUBAENU66" FOREIGN KEY("COMPAGNIA_AEREA_ID") REFERENCES "PUBLIC"."COMPAGNIA_AEREA"("ID") ON DELETE CASCADE NOCHECK;   
ALTER TABLE "PUBLIC"."TRATTA_COMPAGNIE_AEREE" ADD CONSTRAINT "PUBLIC"."FKKQTJJID73JI8H3O0HL5VH3DXE" FOREIGN KEY("COMPAGNIE_AEREE_ID") REFERENCES "PUBLIC"."COMPAGNIA_AEREA"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."TRATTA" ADD CONSTRAINT "PUBLIC"."FK8EL63ROOWR8FVNK8TY1DIWFJM" FOREIGN KEY("AEROPORTO_PARTENZA_ID") REFERENCES "PUBLIC"."AEROPORTO"("ID") ON DELETE CASCADE NOCHECK;     
ALTER TABLE "PUBLIC"."TRATTA" ADD CONSTRAINT "PUBLIC"."FKH60937FYR9ESAPBX7IOOGCT5L" FOREIGN KEY("AEROPORTO_DESTINAZIONE_ID") REFERENCES "PUBLIC"."AEROPORTO"("ID") ON DELETE CASCADE NOCHECK; 
ALTER TABLE "PUBLIC"."SPRING_SESSION_ATTRIBUTES" ADD CONSTRAINT "PUBLIC"."SPRING_SESSION_ATTRIBUTES_FK" FOREIGN KEY("SESSION_PRIMARY_ID") REFERENCES "PUBLIC"."SPRING_SESSION"("PRIMARY_ID") ON DELETE CASCADE NOCHECK;       
ALTER TABLE "PUBLIC"."VOLO" ADD CONSTRAINT "PUBLIC"."FKSL4KMCHWB7I9XLYYSS90CHIDB" FOREIGN KEY("TRATTA_ID") REFERENCES "PUBLIC"."TRATTA"("ID") NOCHECK;        
ALTER TABLE "PUBLIC"."BIGLIETTO" ADD CONSTRAINT "PUBLIC"."FK67EW0P7HROF994WOHWNI9S4D8" FOREIGN KEY("PASSEGGERO_ID") REFERENCES "PUBLIC"."PASSEGGERO"("ID") NOCHECK;           
ALTER TABLE "PUBLIC"."TRATTA_COMPAGNIE_AEREE" ADD CONSTRAINT "PUBLIC"."FKAN2UAU8FYTT1OXJKXTHA4O4RS" FOREIGN KEY("TRATTE_ID") REFERENCES "PUBLIC"."TRATTA"("ID") NOCHECK;      
ALTER TABLE "PUBLIC"."BIGLIETTO" ADD CONSTRAINT "PUBLIC"."FK8Y6M1AHQBIT9HUDGRY3BV9VHI" FOREIGN KEY("VOLO_CODICE") REFERENCES "PUBLIC"."VOLO"("CODICE") NOCHECK;               
ALTER TABLE "PUBLIC"."VOLO" ADD CONSTRAINT "PUBLIC"."FKSQLO5FYBOVFY945WQWL7KVBAL" FOREIGN KEY("AEREO_ID") REFERENCES "PUBLIC"."AEREO"("ID") NOCHECK;          
ALTER TABLE "PUBLIC"."AUTHORITIES" ADD CONSTRAINT "PUBLIC"."FK_AUTHORITIES_USERS" FOREIGN KEY("USERNAME") REFERENCES "PUBLIC"."USERS"("USERNAME") NOCHECK;    
